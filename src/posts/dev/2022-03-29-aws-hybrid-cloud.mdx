---
title: '[AWS] Hybrid Cloud'
description: ''
date: '2022-03-29T12:14:45+09:00'
tags: []
---

### Hybrid Cloud for Storage
- AWS는 하이브리드 클라우드를 밀고 있음
    - 일부는 클라우드에
    - 일부는 온프레미스에
- 사용 되는 이유
    - 긴 클라우드 마이그레이션
    - 보안상의 이유
    - IT 전략
    - 규정 준수
- S3 데이터를 온프레미스로 나타내는 법
- AWS Storage Gateway!

#### AWS Storage Gateway
- 온프레미스 데이터와 S3에 있는 클라우드 데이터를 이어줌
- 유즈케이스 : 장애 복구, 백업, 연결된 스토리지
- 스토리지 게이트웨이의 3가지 타입
    - 파일 게이트웨이
    - 볼륨 게이트웨이
    - 테이프 게이트웨이
- 시험 팁 : 3개의 차이점 이해하기

#### 파일 게이트웨이
- NFS, SMB 프로토콜
- S3 스탠다드 지원, S3 IA, S3 One Zone IA
- 각각의 파일 게이트웨이에 iam role이 있음
- 가장 최근에 쓴 데이터가 캐싱됨
- 여러개의 서버에 장착될 수 있음
- 사용자 인증이 필요한 경우 Active Directory(AD)와 통합되어 인증 실행

#### 볼륨 게이트웨이
- iSCSI 프로토콜을 사용해 s3와 통신하는 블록 형태의 스토리지
- `EBS 스냅샷`으로 백업되는 볼륨을 가지게 되는데, 필요한 경우 볼륨을 복구하는데 도움을 준다
- 캐시된 볼륨 : 가장 최근 데이터에 대해 낮은 지연률
- 저장된 볼륨 : 전체 데이터셋은 온프로미스에 저장하고, s3에 스케줄링 백업을 한다.

#### 테이프 게이트웨이
- 몇몇 기업은 물리적 테이프에 백업을 저장함
- 테이프 게이트웨이를 통해, 같은 프로세스를 쓸 수 있지만 클라우드 내에서 할 수 있음
- 가상 테이프 라이브러리 (VTL)은 S3와 Glacier로 지원
- 존재하는 테이프 베이스 프로세스를 통해 데이터를 백업

#### 공통점
- 모두 해당 기업 내의 데이터센터 내부에서 설치해 사용해야 함
- 해당 게이트웨이를 실행할 가상 서버가 없는 경우
- Storage Gateway Hardware Appliance
    - 스토리지 게이트웨이를 쓴다는건 온프로미스 가상화가 필요하다는 말
    - Hardware Appliance를 사용 가능
    - amazon.com에서 살 수 있음
    - File Gateway, Volume Gateway, Tape Gateway와 사용
    - CPU, memory, network, SSD 캐시 등 필요
    - 소규모 데이터 센터에서 가상화가 불가능한 경우 자주 사용

#### AWS Storage Gateway Summary
- 시험 팁 : 문제를 잘 읽고 게이트웨이 종류를 맞추자
- 온프레미스 사이의 데이터와 클라우드 데이터 사이 브릿지 => 스토리지 게이트웨이
- 파일 접근 / NFS => Acitve Directory를 통한 유저 인증 =>  파일 게이트웨이
- 볼륨 / 블록 스토리지 / iSCSI => EBS를 통한 S3 백업 => 볼륨 스토리지
- VTL 테이프 솔루션 / iSCSI를 통한 백업 / S3 and Glacier => 테이프 게이트웨이
- 온프로미스 가상화가 안될 경우 => Hardware Appliance
