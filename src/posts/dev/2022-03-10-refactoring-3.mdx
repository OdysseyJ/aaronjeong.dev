---
title: '[Refactoring] 리팩토링 3판 Chapter-03'
description: study refactoring 2nd edition chapter 3
date: '2022-03-10T21:53:27+09:00'
tags: [Dev, Refactoring]
---

### 코드에서 나는 악취

#### 기이한 이름
- 이름만 보고도 각각이 무슨 일을 하고 어떻게 사용해야하는지 명확한 함수를 만들라.

#### 중복 코드
- 여러번 반복되는 중복 코드를 제거하라.

#### 긴 함수
- 함수는 되도록이면 짧고 명료하게 유지해라
- 대부분이 함수 추출하기로 해결가능.

#### 긴 매개변수 목록
- 매개변수가 너무 많다면 줄여라. 아래의 방법들이 있다.
- 매개변수를 질의 함수로 바꾸기 (11.5)
- 객체 통째로 넘기기 (11.4)
- 매개변수 객체 만들기 (6.8)
- 플래그 인수 제거하기 (11.3)
- 여러 함수를 클래스로 묶기 (6.9)

#### 전역 데이터
- 전역 데이터는 디버깅이 힘들다.
- 변수 캡슐화하기로 피할 수 있다.

#### 가변 데이터
- 데이터는 항상 불변성을 지니게 코드를 작성하는것이 좋다.
- 함수형 프로그래밍에서는 데이터를 변경하면 새로운 복사본을 만들어 반환하는게 기본이다.

#### 뒤엉킨 변경
- 단일 책임 원칙을 지키지 않은 코드는 수정시 여러곳을 한꺼번에 수정해야하고, 실수를 만들 일이 크다.

#### 산탄총 수술
- 코드를 변경할 때 마다 자잘하게 수정해야하는 클래스가 많을 때.
- 찾기도 어렵고 수정해야 할 곳을 지나치기 쉽다.

#### 기능 편애
- 영역 안 상호작용은 늘리고, 영역 사이에 이뤄지는 상호작용은 최소로 줄인다.
- 최대한 외부 모듈에 대한 의존성은 낮추고, 내부 모듈을 활용할 수 있는 방향을 찾는다.

#### 데이터 뭉치
- 비슷한 항목끼리 뭉쳐진 데이터가 하나의 데이터를 삭제했을 때 나머지로 의미가 없다면, 데이터를 객체로 바꿔준다.

#### 기본형 집착
- 프로그래밍 언어에서 제공하는 기본형에만 집착하기보다는, 주어진 문제에 맞는 새로운 데이터타입(화폐, 좌표, 구간)을 만드는것이 좋다.

#### 반복되는 switch문
- 긴 조건문을 보면 다형성을 통해 해결할 수 있음을 느껴야한다.

#### 반복문
- 반복문을 파이프라인으로 변경하면 일급 함수를 활용해 반복을 피할 수 있다. (map, reduce...)

#### 성의 없는 요소

#### 추측성 일반화
- 나중에 필요할거야 라는 생각으로 당장은 필요없는 모든 특이케이스 처리와 후킹을 작성한 코드
- 죽은 코드 제거하기

#### 임시 필드
- 특정 상황에서만 채워지는 필드들은 로직을 헷갈리게 한다.
- 클래스 추출하기 + 함수 옮기기로 임시 필드들과 관련된 코드는 전부 새 클래스에 몰아넣는다.

#### 메시지 체인
- 한 객체를 통해 다른 객체를 얻은 뒤, 얻은 객체에 또 다른 객체를 요청하는 방식
- 연쇄적으로 이어지는 코드이기 때문에, 중간 단계를 수정하면 클라이언트도 수정해야함.
- 위임 숨기기로 해결한다 (python의 property를 따로 정의하는 케이스를 말하는거같다.)

#### 중개자
- 클래스가 제공하는 메서드의 절반 이상이 다른 클래스에서 위임하고 있다면, 코드를 파악하기 힘들어진다.
- 실제로 일을 하는 객체와 직접 소통하게 중개자를 제거하자.

#### 내부자 거래
- 은밀히 데이터를 주고받는 모듈이 있다며 사적으로 처리하는 부분을 줄여야 한다.

#### 거대한 클래스
- 너무 거대해진 클래스는 클래스 추출하기로 슈퍼클래스, 서브클래스로 추출해주는게 좋다.

#### 서로 다른 인터페이스의 대안 클래스들
- 클래스의 장점은 언제든 바꿀수 있다는 것이기에, 인터페이스를 똑같이 맞춰야 한다.

#### 데이터 클래스
- 게터와 세터로만 이루어진 클래스
- 데이터 저장용도로만 쓰기 때문에 데이터 깊이를 깊게 다루는 경우가 많음.
- 수정을 막자.

#### 상속 포기
- 서브클래스가 부모의 동작은 필요로하지만 인터페이스를 따르지 않을 때 나는 악취
- 구현을 따르지 않는것(오버라이딩)은 괜찮지만, 인터페이스는 따라야 한다.

#### 주석
- 주석이 필요없는 코드를 작성하자
- 주석이 장황하게 필요한 코드는 잘못 짠 코드